"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();!function(t){var i=function(){function i(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,i),this.options=n,this.$el=e,this.columnWidth=this.options.columnWidth||this.$el.find(this.options.itemSelector).first().outerWidth(!0),this.build(),this.options.resize&&(this.resizeHandler=this.rebuild.bind(this),t(window).on("resize",this.resizeHandler))}return _createClass(i,[{key:"build",value:function(){var i=this,e=Math.floor(this.$el.width()/this.columnWidth),n=this.$el.find(this.options.itemSelector),r=n.get().reduce(function(e,n){for(var r=t(n),s=Math.floor(r.outerWidth(!0)/i.columnWidth),o=[],a=0;s>a;a++)o.push(r);return e.concat(o)},[]);r.forEach(function(i,n){if(!(e>=n)){var s=t(i),o=r[n-e],a=s.offset().top-parseInt(s.css("margin-bottom"))-o.offset().top-o.outerHeight()-parseInt(o.css("margin-bottom"));a&&s.css("margin-top",function(t,i){return parseInt(i)-a})}})}},{key:"rebuild",value:function(){this.reset(),this.build()}},{key:"reset",value:function(){this.$el.find(this.options.itemSelector).css("margin-top","")}},{key:"destroy",value:function(){this.reset(),this.options.resize&&t(window).off("resize",this.resizeHandler)}}]),i}();t.fn.tightGrid=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e=t.extend({},t.fn.tightGrid.defaults,e),this.each(function(){var n=t(this);n.data("tightGrid")||n.data("tightGrid",new i(n,e))})},t.fn.tightGrid.defaults={itemSelector:".js-item",columnWidth:null,resize:!0}}(jQuery);